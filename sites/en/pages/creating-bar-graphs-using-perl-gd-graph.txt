=title Creating bar graphs using Perl GD::Graph
=timestamp 2015-02-01T07:30:01
=indexes GD::Graph
=status draft
=books beginner_book
=author szabgab
=archive 1
=comments_disqus_enable 1

=abstract start

<a href="https://metacpan.org/pod/GD::Graph">GD::Graph</a> makes it easy to create various types of
graphs using Perl. The distribution comes with an extensive set of examples. In this article we are
going to see a bar-graph and how various parameters impact its look.

=abstract end

This code is based on the <a href="https://metacpan.org/release/GDGraph">sample11.pl</a> file included included
in the distribution.

<include file="examples/gdgraph_bars.pl">

After loading the <a href="https://metacpan.org/pod/GD::Graph::Data">GD::Graph::Data</a> module that represents the
raw data, and the <hl>GD::Graph::bars</hl> module that handles the creation of the vertical bar-graphs, we create the data.
The first array reference holds the values of the x-axis, the second array reference holds the corresponding values
of the y-axis.

Then we create a <hl>GD::Graph::bars</hl> object. Set some parameters and call the <hl>plot</hl> method that
draws the image. At the end we call <hl>$graph->gd->png</hl> that exports the image in <b>PNG</b> format.
In this example we save the image in a file, but if this was a web environment we might just return the image.

Running the script will generated the following graph:

<img src="/img/gdgraph/bars_plain.png" alt="just a bar graph created by Perl GD::Graph" />

It is a bit "bulky", but we can clearly see the values on the x-axis we provided in the data.
It is clear that the content of the <hl>title</hl> parameter is at the top of the graph and the values of the
<hl>x_label</hl> and <hl>y_label</hl> parameters were added under the x-axis and next to the y-axis respectively.

Let's see what happens as we enable the rest of the parameters one-by-one.

<h2>y_max_value</h2>

In the previous graph the y-axis ran from 0 to 10. I am not sure why did it run exactly to 10, it is somehow
calculated from the max value that needs to be displayed. (In a simple experiment I changed one of the values to 12
and the y-axis ran up to 25.) In any case, if you are not satisfied with the max y-axis value calculated by the module,
you can supply your own number using the <hl>y_max_value</hl> parameter. We set it to 7 and got the following result:

<code lang="perl">
    y_max_value     => 7,
</code>
 
<img src="/img/gdgraph/bars_y_max_value.png" alt="y_max_value set" />

<h2>y_tick_number</h2>

<code lang="perl">
    y_tick_number   => 8,
</code>

<img src="/img/gdgraph/bars_y_tick_number.png" alt="y_tick_number set" />


<img src="/img/gdgraph/bars_all.png" alt="just a bar graph created by Perl GD::Graph" />


<img src="/img/" alt="" />



